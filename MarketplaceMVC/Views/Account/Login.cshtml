@using MarketplaceMVC.ViewModels.AccountViewModels;
@model LoginVM
@addTagHelper *, Microsoft.AspNetCore.Mvc.TagHelpers
@{
    ViewData["Title"] = "Авторизация";
}
<form id="loginForm" onsubmit="return false">
    <div style="background-color: white; border: 3px solid #d8e3e6; border-radius: 3px; box-shadow: none;" class="mt-5 p-4">
        <h5 class="" style="color: #7F7F7F">Авторизация</h5>
        <span class="text-danger"  asp-validation-for="Password" id="serverValidate"></span>
        <div class="form-group flex-column">
            <label style="color: #8d9aa5;">Имя пользователя: </label>
            <span class="text-danger" asp-validation-for="Login"></span>
            <input type="text" class="form-control input-lg" asp-for="Login" placeholder="Name">
        </div>
        <div style="border: 1px dashed #c9c9c9" class="mt-3 mb-3"></div>
        <div class="form-group flex-column">
            <label style="color: #8d9aa5;">Пароль: </label>
            <span class="text-danger" asp-validation-for="Password"></span>
            <input type="password" class="form-control input-lg" asp-for="Password" placeholder="Password">
        </div>
        <div style="border: 1px dashed #c9c9c9" class="mt-3 mb-3"></div>
        <div class="form-group form-check">
            <input type="checkbox" class="form-check-input" id="exampleCheck1">
            <label class="form-check-label" for="exampleCheck1" asp-for="IsPersistent">Запомнить меня</label>
        </div>
        <div class="text-center">
            <button type="reset" class="btn btn-primary">Очистить</button>
            <button class="btn btn-primary" type="submit" id="loginBtn">Авторизироваться</button>
        </div>
    </div>
</form>


@section Scripts
    {
    <script>
        $('#loginBtn').on('click', function () {
            $.ajax({
                type: "POST",
                url: '/api/login',
                data: $('#loginForm').serialize(),
                success: function (response) {
                    console.log("success")
                    window.location = "@Url.Action("index","home")"
                    serverValidate.text = "";
                },
                error: function (response) {
                    console.log(response.responseJSON.message)
                    $('#serverValidate').html(response.responseJSON.message);
                }
            })
        })
    </script>
}
